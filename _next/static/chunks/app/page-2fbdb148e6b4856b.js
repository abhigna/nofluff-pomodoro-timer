(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{9614:(e,o,t)=>{Promise.resolve().then(t.bind(t,1412))},1956:(e,o,t)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"default",{enumerable:!0,get:function(){return r}});let n=t(306)._(t(580));function r(e,o){var t;let r={};"function"==typeof e&&(r.loader=e);let i={...r,...o};return(0,n.default)({...i,modules:null==(t=i.loadableGenerated)?void 0:t.modules})}("function"==typeof o.default||"object"==typeof o.default&&null!==o.default)&&void 0===o.default.__esModule&&(Object.defineProperty(o.default,"__esModule",{value:!0}),Object.assign(o.default,o),e.exports=o.default)},9827:(e,o,t)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let n=t(3719);function r(e){let{reason:o,children:t}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(o);return t}},580:(e,o,t)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"default",{enumerable:!0,get:function(){return c}});let n=t(5155),r=t(2115),i=t(9827),l=t(9214);function s(e){return{default:e&&"default"in e?e.default:e}}let a={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},c=function(e){let o={...a,...e},t=(0,r.lazy)(()=>o.loader().then(s)),c=o.loading;function u(e){let s=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,a=!o.ssr||!!o.loading,u=a?r.Suspense:r.Fragment,d=o.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(l.PreloadChunks,{moduleIds:o.modules}):null,(0,n.jsx)(t,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(t,{...e})});return(0,n.jsx)(u,{...a?{fallback:s}:{},children:d})}return u.displayName="LoadableComponent",u}},9214:(e,o,t)=>{"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"PreloadChunks",{enumerable:!0,get:function(){return s}});let n=t(5155),r=t(7650),i=t(5861),l=t(8284);function s(e){let{moduleIds:o}=e;if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&o){let e=t.reactLoadableManifest;for(let t of o){if(!e[t])continue;let o=e[t].files;s.push(...o)}}return 0===s.length?null:(0,n.jsx)(n.Fragment,{children:s.map(e=>{let o=t.assetPrefix+"/_next/"+(0,l.encodeURIPath)(e);return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:o,rel:"stylesheet",as:"style"},e):((0,r.preload)(o,{as:"script",fetchPriority:"low"}),null)})})}},1412:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>m});var n=t(5155),r=t(2115);let i=()=>{let[e,o]=(0,r.useState)(null),[t,n]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!("serviceWorker"in navigator)){console.warn("Service Workers not supported in this environment");return}"Notification"in window&&o(Notification.permission),navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker registered with scope:",e.scope),n(e)}).catch(e=>{console.error("Service Worker registration failed:",e)})},[]);let i=(0,r.useCallback)(async()=>{if(!("Notification"in window))return console.warn("Notifications not supported in this environment"),!1;try{let e=await Notification.requestPermission();return console.log("Notification permission result:",e),o(e),"granted"===e}catch(e){return console.error("Error requesting notification permission:",e),!1}},[]),l=(0,r.useCallback)((e,o)=>{console.log("Attempting to send notification:",e,o);try{new Audio("/notification-sound.mp3").play().catch(e=>console.warn("Could not play notification sound"))}catch(e){console.warn("Audio playback not supported")}if(!("Notification"in window)){console.warn("Notifications not supported");return}if("granted"!==Notification.permission){console.warn("Notification permission not granted"),i().then(t=>{t&&l(e,o)});return}if(navigator.serviceWorker&&navigator.serviceWorker.controller&&t)console.log("Sending notification through Service Worker"),navigator.serviceWorker.controller.postMessage({type:"SHOW_NOTIFICATION",title:e,body:o,icon:"/icons/icon-192x192.png"});else if("Notification"in window){console.log("Falling back to direct Notification API");try{let t=new Notification(e,{body:o,icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",tag:"pomodoro-notification"});setTimeout(()=>t.close(),5e3)}catch(e){console.error("Error creating notification:",e)}}else console.warn("No notification method available")},[t,i]);return{permission:e,requestPermission:i,sendNotification:l}};var l=t(4850),s=t.n(l),a=t(1956),c=t.n(a);let u={pomodoro:1500,shortBreak:300,longBreak:900},d=()=>{let[e,o]=(0,r.useState)("pomodoro"),[t,l]=(0,r.useState)(u.pomodoro),[a,c]=(0,r.useState)(!1),[d,f]=(0,r.useState)(0),{requestPermission:m,sendNotification:p}=i(),h=(0,r.useRef)(null),g=(0,r.useCallback)(()=>{c(!1);try{new Audio("/timer-complete.mp3").play().catch(e=>console.warn("Could not play timer sound"))}catch(e){console.warn("Audio playback not supported")}if("pomodoro"===e){let e=d+1;f(e),p("Pomodoro completed!","Time for a break. You have completed "+e+" pomodoros."),e%4==0?o("longBreak"):o("shortBreak")}else p("Break completed!","shortBreak"===e?"Time to focus.":"Long break complete. Ready for a new session?"),o("pomodoro")},[e,d,p,o,f]);return(0,r.useEffect)(()=>(a&&t>0?h.current=window.setTimeout(()=>{l(t-1)},1e3):a&&0===t&&g(),()=>{h.current&&clearTimeout(h.current)}),[a,t,g]),(0,r.useEffect)(()=>{l(u[e]),c(!1)},[e]),(0,r.useEffect)(()=>{m().then(e=>{console.log("Notification permission granted:",e)})},[m]),(0,n.jsxs)("div",{className:s().container,children:[(0,n.jsx)("h1",{className:s().title,children:"Pomodoro"}),(0,n.jsxs)("div",{className:s().modeSelector,children:[(0,n.jsx)("button",{className:"".concat(s().modeButton," ").concat("pomodoro"===e?s().active:""),onClick:()=>o("pomodoro"),children:"Focus"}),(0,n.jsx)("button",{className:"".concat(s().modeButton," ").concat("shortBreak"===e?s().active:""),onClick:()=>o("shortBreak"),children:"Short"}),(0,n.jsx)("button",{className:"".concat(s().modeButton," ").concat("longBreak"===e?s().active:""),onClick:()=>o("longBreak"),children:"Long"})]}),(0,n.jsx)("div",{className:s().timerDisplay,children:(e=>{let o=Math.floor(e/60);return"".concat(o.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))})(t)}),(0,n.jsxs)("div",{className:s().controls,children:[(0,n.jsx)("button",{className:s().controlButton,onClick:()=>{c(!a)},children:a?"Pause":"Start"}),(0,n.jsx)("button",{className:s().controlButton,onClick:()=>{c(!1),l(u[e])},children:"Reset"})]}),(0,n.jsxs)("div",{className:s().stats,children:["Completed: ",d]})]})},f=c()(()=>Promise.resolve(d),{ssr:!1});function m(){return(0,n.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-0",children:(0,n.jsx)(f,{})})}},4850:e=>{e.exports={container:"PomodoroTimer_container__XkxML",title:"PomodoroTimer_title__wVevq",modeSelector:"PomodoroTimer_modeSelector__2Xfty",modeButton:"PomodoroTimer_modeButton__touNZ",active:"PomodoroTimer_active__Ag_X1",timerDisplay:"PomodoroTimer_timerDisplay__F_d3Y",controls:"PomodoroTimer_controls__0p3vc",controlButton:"PomodoroTimer_controlButton__LT3El",stats:"PomodoroTimer_stats__sX7eg"}}},e=>{var o=o=>e(e.s=o);e.O(0,[761,441,447,358],()=>o(9614)),_N_E=e.O()}]);